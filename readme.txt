1，音乐氛围灯设计重点是用DMA，把定时比较器的设定值适时改变，以获取不同的0码和1码（PWM波生成的原理）
2.一般可以设置800K的计数频率(比如72M，90-1的重装载计数值),这个就是脉冲周期,在该周期内,2/3高电平的码就是1码（另1/3周期就是低电平），2/3低电平就是0码。这个设定如果不合适就会在点灯数量多的时候出现色彩偏差，有人建议72M主频再90分频后,ws2812.h文件中的宏"#define WS2812_Code_0 (22u) "#define WS2812_Code_1 (57u) 更合适,但我实测并不行.还有人说直接把WS2812_Send(void)函数定义中DMA启动之前加上一句"关闭DMA"也可以解决色彩偏差(这个可行)
3.DMA搬送这个比较计数值,需要自己设计逻辑代码实现的，此处用了两种方法，Buf0-1文件夹中的代码就是分配两个内存区，A区放好数据去发送的同时把B区数据准备好，下一步再发送B区时又装填好A区，如此交替发送;另一种算法（2D_Arrary法）就是用二维数组实现的
4.蓝牙模块默认是9600波特率，必须和Cubmax工程中串口波特率一致。如果要修改蓝牙模块的波特率则要用安信可HC-04官网的串口助手，在不要连接单片机的情况下，连接电脑和蓝牙模块(插在底座上)状态下"AT+BAUD=115200,N"可以修改蓝牙模块的波特率为115200;此时蓝牙模块插到这个底座上（是靠外边的那一排插蓝牙,而靠线路板内侧的那排是连接单片机串口用的）,还要注意把单片机连线拔下来（以防干扰）,此时电脑通过底座就可以和蓝牙通信(比如上面修改蓝牙的波特率等，此时的蓝牙还可以扫描www.hc01.com/home主页的"微信扫一扫"小程序，找到HC-04,就可以通过手机与串口助手互发信息)；最后若要手机控制单片机程序，就把蓝牙从底座上拔出，直接连接单片机的RX和TX交叉，VCC和GND之后，手机输入程序中定义好的"B"开启呼吸灯程序,"A"则是流水灯；M则是音乐律动灯
5.如果要使用单片机通过串口和电脑通信，就只把蓝牙底座和电脑连接,这个蓝牙模块底座就是一个ch430转TTL的普通串口,连接VCC和GND后，RX与TX交叉互联就可以使用串口助手与单片机通信;




                                  